<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>3D Space View â€“ SpaceTravelHub</title>
<script src="https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Cesium.js"></script>
<link href="https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Widgets/widgets.css" rel="stylesheet" />
<style>
html, body, #cesiumContainer {
  width: 100%; height: 100%; margin: 0; padding: 0; background: black;
}
.hud {
  position: absolute; top: 15px; left: 15px;
  padding: 8px 14px;
  background: rgba(0,0,0,0.5);
  border: 1px solid cyan;
  color: cyan;
  font-family: "Orbitron", sans-serif;
  border-radius: 8px;
}
</style>
</head>
<body>

<div class="hud">ðŸ›° Live Satellite Tracking</div>
<div id="cesiumContainer"></div>

<script type="module">
import { Viewer, Cartesian3, Color, PointGraphics, Entity } from "https://cdn.jsdelivr.net/npm/cesium@1.114.0/+esm";

const apiURL = "https://script.google.com/macros/s/AKfycbxxQaRV6aV4hZfaDqI29E8JihEgnmer0lgne-GNNZCiZqqL5XckER5VQMSCEC_3z_fq/exec";

const viewer = new Viewer("cesiumContainer", {
  timeline: false,
  animation: false,
  baseLayerPicker: true,
  shouldAnimate: true
});

async function loadSatellites() {
  const res = await fetch(apiURL);
  const missions = await res.json();

  missions.forEach(m => {
    if (!m.lat || !m.lng || !m.alt) return;

    viewer.entities.add(new Entity({
      name: m.mission,
      position: Cartesian3.fromDegrees(m.lng, m.lat, m.alt * 1000),
      point: new PointGraphics({
        pixelSize: 10,
        color: Color.CYAN,
      }),
      description: `
        <h3>${m.mission}</h3>
        <p><b>Agency:</b> ${m.agency}</p>
        <p><b>Status:</b> ${m.status}</p>
        <p><b>Altitude:</b> ${m.alt} km</p>
      `
    }));
  });
}

loadSatellites();
</script>
</body>
</html>